schema: '2.0'
stages:
  download:
    cmd: python src/download.py
    deps:
    - path: src/download.py
      hash: md5
      md5: 0126a2b66e54051985b2bc4ab6b2b360
      size: 3214
    params:
      params.yaml:
        base.BASE_URL: https://www.ncei.noaa.gov/data/local-climatological-data/access/
        base.EXPECTED_COLUMNS:
        - HourlyDryBulbTemperature
        base.GT_COLUMNS:
        - MonthlyMeanTemperature
        base.N_LOCATIONS: 3
        base.YEAR: 2023
        download.DOWNLOAD_PATH: downloaded
    outs:
    - path: downloaded
      hash: md5
      md5: 0f830aa5d0e65486229464b4a89b9c97.dir
      size: 23894657
      nfiles: 3
  process:
    cmd: python src/process.py
    deps:
    - path: downloaded
      hash: md5
      md5: 0f830aa5d0e65486229464b4a89b9c97.dir
      size: 23894657
      nfiles: 3
    - path: src/process.py
      hash: md5
      md5: f7177b37799b843560edf4b2b27d690c
      size: 2488
    params:
      params.yaml:
        base.EXPECTED_COLUMNS:
        - HourlyDryBulbTemperature
        base.YEAR: 2023
        process.INPUT_PATH: downloaded
        process.OUTPUT_FILE_NAME: processed_averages.json
        process.OUTPUT_PATH: processed
    outs:
    - path: processed
      hash: md5
      md5: 457bb4f649a42e815dac8f9348b5f062.dir
      size: 389
      nfiles: 1
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: downloaded
      hash: md5
      md5: 0f830aa5d0e65486229464b4a89b9c97.dir
      size: 23894657
      nfiles: 3
    - path: src/prepare.py
      hash: md5
      md5: 24675d76a67d96bb8b73534c96122393
      size: 2333
    params:
      params.yaml:
        base.GT_COLUMNS:
        - MonthlyMeanTemperature
        prepare.INPUT_PATH: downloaded
        prepare.OUTPUT_FILE_NAME: actual_averages.json
        prepare.OUTPUT_PATH: prepared
    outs:
    - path: prepared
      hash: md5
      md5: ece58bb67f875366549e7b4deb28364a.dir
      size: 355
      nfiles: 1
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: prepared
      hash: md5
      md5: ece58bb67f875366549e7b4deb28364a.dir
      size: 355
      nfiles: 1
    - path: processed
      hash: md5
      md5: 457bb4f649a42e815dac8f9348b5f062.dir
      size: 389
      nfiles: 1
    - path: src/evaluate.py
      hash: md5
      md5: 5213b0d21dc39a3bed7853250280ea72
      size: 2616
    params:
      params.yaml:
        base.MAPPING:
          HourlyDryBulbTemperature: MonthlyMeanTemperature
        evaluate.INPUT_FILE_NAMES:
        - processed_averages.json
        - actual_averages.json
        evaluate.INPUT_PATHS:
        - processed
        - prepared
    outs:
    - path: eval/live/metrics.json
      hash: md5
      md5: 017b83a5cd492820902f2d3e25432597
      size: 267
      isexec: true
