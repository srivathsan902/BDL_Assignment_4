schema: '2.0'
stages:
  download:
    cmd: python src/download.py
    deps:
    - path: src/download.py
      hash: md5
      md5: 902ef532853d52d9b51e14c6d2b083e2
      size: 3068
    params:
      params.yaml:
        base.BASE_URL: https://www.ncei.noaa.gov/data/local-climatological-data/access/
        base.EXPECTED_COLUMNS:
        - HourlyDryBulbTemperature
        base.GT_COLUMNS:
        - MonthlyMeanTemperature
        base.N_LOCATIONS: 1
        base.YEAR: 2023
        download.DOWNLOAD_PATH: downloaded
    outs:
    - path: downloaded
      hash: md5
      md5: fa01717e6d9927a0c917bffe2a497ba6.dir
      size: 48261061
      nfiles: 1
  process:
    cmd: python src/process.py
    deps:
    - path: downloaded
      hash: md5
      md5: fa01717e6d9927a0c917bffe2a497ba6.dir
      size: 48261061
      nfiles: 1
    - path: src/process.py
      hash: md5
      md5: baffc6b5b6fa50eda722d0691973653a
      size: 2408
    params:
      params.yaml:
        base.EXPECTED_COLUMNS:
        - HourlyDryBulbTemperature
        base.YEAR: 2023
        process.INPUT_PATH: downloaded
        process.OUTPUT_FILE_NAME: processed_averages.json
        process.OUTPUT_PATH: processed
    outs:
    - path: processed
      hash: md5
      md5: 5c7243e7ebc86bf96bf8b946e42198d0.dir
      size: 131
      nfiles: 1
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: downloaded
      hash: md5
      md5: fa01717e6d9927a0c917bffe2a497ba6.dir
      size: 48261061
      nfiles: 1
    - path: src/prepare.py
      hash: md5
      md5: d0e19ea900aa76d00930f8b54d0f8980
      size: 1263
    params:
      params.yaml:
        base.GT_COLUMNS:
        - MonthlyMeanTemperature
        prepare.INPUT_PATH: downloaded
        prepare.OUTPUT_FILE_NAME: actual_averages.json
        prepare.OUTPUT_PATH: prepared
    outs:
    - path: prepared
      hash: md5
      md5: e366cbed489ec89f425aaf883657bacf.dir
      size: 117
      nfiles: 1
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: prepared
      hash: md5
      md5: e366cbed489ec89f425aaf883657bacf.dir
      size: 117
      nfiles: 1
    - path: processed
      hash: md5
      md5: 5c7243e7ebc86bf96bf8b946e42198d0.dir
      size: 131
      nfiles: 1
    - path: src/evaluate.py
      hash: md5
      md5: 67e5b3cdb1e8fa07ec77c0dc0eee0e09
      size: 2422
    params:
      params.yaml:
        base.MAPPING:
          HourlyDryBulbTemperature: MonthlyMeanTemperature
        evaluate.INPUT_FILE_NAMES:
        - processed_averages.json
        - actual_averages.json
        evaluate.INPUT_PATHS:
        - processed
        - prepared
    outs:
    - path: eval/live/metrics.json
      hash: md5
      md5: eb44b6c4a346a7ae4de18602a6dd9477
      size: 72
      isexec: true
